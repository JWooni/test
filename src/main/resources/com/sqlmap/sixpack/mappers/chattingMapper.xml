<?xml version="1.0" encoding="UTF-8"?>
 <!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sixpack.chat.admin.dao.ChattingListDao">

<!-- **************** -->
<!-- SELECT SECTION -->
<!-- **************** -->

<select id="selectchattingList" parameterType="com.sixpack.chat.admin.vo.ChattingListVO" resultType="com.sixpack.chat.admin.vo.ChattingListVO">
/** [chattingMapper.xml][com.sixpack.chat.service.chattingMapper.selectchattingList][채팅 내역 목록 조회] **/

		select chatlistSeq as chatlistSeq ,phoneNo as phoneNo, csGroup as csGroup, userName as userName, empId as empId, ans as ans, regDate as regDate
		from CHATTING_LIST
		<trim prefix="WHERE" prefixOverrides="AND|OR">
			<if test="searchType=='user' and keyword != null and keyword != '' ">
				AND userName like CONCAT('%', #{keyword}, '%')
			</if>
			<if test="searchType=='emp' and keyword != null and keyword != '' ">
				AND empId like CONCAT('%', #{keyword}, '%')
			</if>
			<if test="searchType=='categori' and keyword != null and keyword != '' ">
				AND csGroup like CONCAT('%', #{keyword}, '%')
			</if>	
		</trim>
		order by chatlistSeq DESC
		LIMIT #{startList}, #{listSize}

</select>

<select id="selectchattingListCount" parameterType="com.sixpack.chat.content.utils.Search" resultType="int">
/** [chattingMapper.xml][com.sixpack.chat.service.chattingMapper.selectchattingListCount][채팅 내역 목록 수] **/

	SELECT COUNT(chatlistSeq)
	FROM CHATTING_LIST
		<trim prefix="WHERE" prefixOverrides="AND|OR">
			<if test="searchType=='user' and keyword != null and keyword != '' ">
				AND userName like CONCAT('%', #{keyword}, '%')
			</if>
			<if test="searchType=='emp' and keyword != null and keyword != '' ">
				AND empId like CONCAT('%', #{keyword}, '%')
			</if>
			<if test="searchType=='categori' and keyword != null and keyword != '' ">
				AND csGroup like CONCAT('%', #{keyword}, '%')
			</if>	
		</trim>
</select>

<select id="viewDetail" parameterType="int" resultType="com.sixpack.chat.admin.vo.ChattingListVO">
/** [contentMapper.xml][com.sixpack.chat.service.contentMapper.selectUserCenter][컨텐츠 상세 조회] **/
	<![CDATA[
		select chatlistSeq as chatlistSeq ,phoneNo as phoneNo, csGroup as csGroup, userName as userName, empId as empId, ans as ans, regDate as regDate
		from CHATTING_LIST
		where chatlistSeq =#{seq}
	]]>
</select>
	
<!-- **************** -->
<!-- INSERT SECTION -->
<!-- **************** -->


<!-- <insert id="insertcontent" parameterType="contentVO" useGeneratedKeys="true" keyProperty="productSeq">	
/** [contentMapper.xml][com.sixpack.chat.service.contentMapper.insertcontent][컨텐츠 등록] **/
	insert into PRODUCT_LIST(prodName, prodCategory, useStatus, prodIntroduce,prodRegtdate,empId,empName)
	values (#{prodName},#{prodCategory},#{useStatus},#{prodIntroduce},Now(),'soo','쑤니')
</insert>

<insert id="insertFile" parameterType="hashMap" useGeneratedKeys="true" keyProperty="productSeq">
/** [contentMapper.xml][com.sixpack.chat.service.contentMapper.insertFile][첨부파일 등록] **/
		<selectKey keyProperty="productSeq" resultType="int" order="BEFORE">
	    	SELECT MAX(productSeq) FROM PRODUCT_LIST
	  	</selectKey>
		INSERT INTO MP_FILE(productSeq, ORG_FILE_NAME, STORED_FILE_NAME, FILE_SIZE,REGDATE)
		VALUES(#{productSeq},#{ORG_FILE_NAME},#{STORED_FILE_NAME},#{FILE_SIZE},now())
    </insert> -->
	
	
<!-- **************** -->
<!-- UPDATE SECTION -->
<!-- **************** -->



<!-- <update id="updatecontent" parameterType="contentVO">
/** [contentMapper.xml][com.sixpack.chat.service.contentMapper.updatecontent][컨텐츠 수정] **/
<![CDATA[
	update PRODUCT_LIST
	set prodName = #{prodName}, prodCategory = #{prodCategory}, useStatus = #{useStatus}, prodIntroduce = #{prodIntroduce}
	where productSeq = #{productSeq}
]]>
</update> -->
	
	
	
	
<!-- **************** -->
<!-- DELETE SECTION -->
<!-- **************** -->

<!-- <delete id="deletecontent" parameterType="contentVO">
/** [contentMapper.xml][com.sixpack.chat.service.contentMapper.deletecontent][컨텐츠 삭제] **/
<![CDATA[
	delete from PRODUCT_LIST
	where productSeq = #{productSeq}
]]>
</delete> -->
	
</mapper>